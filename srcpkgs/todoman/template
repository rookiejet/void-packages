# Template file for 'todoman'
pkgname=todoman
version=4.6.0
revision=1
build_style=python3-pep517
hostmakedepends="python3-setuptools_scm python3-wheel python3-Sphinx
 python3-sphinx-click python3-sphinx_rtd_theme"
depends="python3-icalendar python3-urwid python3-xdg python3-parsedatetime
 python3-click python3-click-repl python3-click-log python3-dateutil
 python3-humanize jq"
checkdepends="${depends} python3-freezegun python3-hypothesis
 python3-pytest-cov python3-pytz"
short_desc="Simple, standards-based, cli todo (aka: task) manager"
maintainer="Orphaned <orphan@voidlinux.org>"
license="ISC"
homepage="https://github.com/pimutils/todoman"
changelog="https://raw.githubusercontent.com/pimutils/todoman/main/CHANGELOG.rst"
distfiles="${PYPI_SITE}/t/todoman/todoman-${version}.tar.gz"
checksum=bff9be48c88168c3f7b732bb0b65f3539abbcd3383e878f9835fcf43c83add53

post_build() {
	PYTHONPATH="${PWD}/build/lib:${XBPS_CROSS_BASE}/${py3_lib}" make -C docs man
}

post_install() {
	vlicense LICENCE
	vcompletion contrib/completion/zsh/_todo zsh todo
	vcompletion contrib/completion/bash/_todo bash todo
	vsconf config.py.sample config.py
	vman docs/build/man/todo.1
}
